let locale = {
	moduleType:"locale",
	name:"es",
	dictionary:{
		Autoscale:"Autoescalar",
		"Box Select":"Seleccionar Caja",
		"Click to enter Colorscale title":"Introducir el t\xedtulo de la Escala de Color",
		"Click to enter Component A title":"Introducir el t\xedtulo del Componente A",
		"Click to enter Component B title":"Introducir el t\xedtulo del Componente B",
		"Click to enter Component C title":"Introducir el t\xedtulo del Componente C",
		"Click to enter Plot title":"Introducir el t\xedtulo de la Gr\xe1fica",
		"Click to enter X axis title":"Introducir el t\xedtulo del eje X",
		"Click to enter Y axis title":"Introducir el t\xedtulo del eje Y",
		"Click to enter radial axis title":"Introducir el t\xedtulo del eje radial",
		"Compare data on hover":"Comparar datos al pasar por encima",
		"Double-click on legend to isolate one trace":"Haga doble-clic en la leyenda para aislar una traza",
		"Double-click to zoom back out":"Haga doble-clic para restaurar la escala",
		"Download plot as a png":"Descargar gr\xe1fico como png",
		"Download plot":"Descargar gr\xe1fico",
		"Edit in Chart Studio":"Editar en Chart Studio",
		"IE only supports svg.  Changing format to svg.":"IE solo soporta svg. Cambiando formato a svg.",
		"Lasso Select":"Seleccionar con lazo",
		"Orbital rotation":"Rotaci\xf3n esf\xe9rica",
		Pan:"Desplazarse",
		"Produced with Plotly.js":"Hecho con Plotly.js",
		Reset:"Reiniciar",
		"Reset axes":"Reiniciar ejes",
		"Reset camera to default":"Restaurar c\xe1mara predeterminada",
		"Reset camera to last save":"Restaurar anterior c\xe1mara",
		"Reset view":"Restaurar vista",
		"Reset views":"Restaurar vistas",
		"Show closest data on hover":"Mostrar el dato m\xe1s cercano al pasar por encima",
		"Snapshot succeeded":"Gr\xe1fico guardado correctamente",
		"Sorry, there was a problem downloading your snapshot!":"\xa1La descarga del gr\xe1fico fall\xf3!",
		"Taking snapshot - this may take a few seconds":"Guardando gr\xe1fico - podr\xeda tardar unos segundos",
		"Toggle Spike Lines":"Mostrar/Ocultar Gu\xedas",
		"Toggle show closest data on hover":"Activar/Desactivar mostrar el dato m\xe1s cercano al pasar por encima",
		"Turntable rotation":"Rotaci\xf3n plana",
		Zoom:"Modo Ampliar/Reducir",
		"Zoom in":"Ampliar",
		"Zoom out":"Reducir",
		"close:":"cierre:",
		"high:":"alza:",
		"incoming flow count:":"flujo de entrada:",
		"kde:":"edp:",
		"lat:":"lat:",
		"lon:":"lon:",
		"low:":"baja:",
		"lower fence:":"l\xedmite inferior:",
		"max:":"m\xe1x:",
		"mean \xb1 \u03c3:":"media \xb1 \u03c3:",
		"mean:":"media:",
		"median:":"mediana:",
		"min:":"m\xedn:",
		"new text":"nuevo texto",
		"open:":"apertura:",
		"outgoing flow count:":"flujo de salida:",
		"q1:":"q1:",
		"q3:":"q3:",
		"source:":"fuente:",
		"target:":"destino:",
		trace:"traza",
		"upper fence:":"l\xedmite superior:"
	},
	format:{
		days:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],
		shortDays:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],
		months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],
		shortMonths:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],
		date:"%d/%m/%Y",
		decimal:".",
		thousands:","
	}
}
typeof Plotly=="undefined"?(window.PlotlyLocales=window.PlotlyLocales||[],window.PlotlyLocales.push(locale)):Plotly.register(locale);
Plotly.setPlotConfig({locale:"es"})
let A = [
	document.getElementById("trgdfvzxcvgjfgg"),	// 0 Main
	document.getElementById("ioasjzknwdqwads"),	// 1 Aside
	document.getElementById("gefgdfgxwegsdss"),	// 2 Section
];
let B = [
	document.getElementById("izxkjshjasdzzta"),	// 0 Contenedor de los acordiones
	document.getElementById("vbcbcvbfregtrfs"),	// 1 Aside-Div para lineas guardadas
	document.getElementById("yuiqweoqxcaqewt"),	// 2 Aside-Div para los puntos guardados
	document.getElementById("hajzxbqaopqjhav"),	// 3 Boton borrar todo
	document.getElementById("fdfxcaasfgxcxqk"),	// 4 Contenedor de lineas guardadas
	document.getElementById("krtegujidfokjfh")	// 5 Contenedor puntos guardados
];
let C = [
	document.getElementById("yasgjhzxhjhaqhd"),	// 0 Div lineas de entalpias
	document.getElementById("hjbzakkzxjkaiaj"),	// 1 Div lineas de humedad especifica
	document.getElementById("jyuaiujszxccqfd"),	// 2 Div lineas de humedad relativa
	document.getElementById("masdjkzxcoqacjs"),	// 3 Div lineas de temperatura de bulbo humedo
	document.getElementById("eqweoiaskjznaqa"),	// 4 Div lineas de temperatura de bulbo seco
	document.getElementById("wtyauizxjhghqqq"),	// 5 Div lineas de temperatura de rocio
	document.getElementById("wsjkzoopalzkqwa")	// 6 Div lineas de volumen especifico
];
let D = [
	document.getElementById("tytfgcvsazxcsda"),	// 0 Contenedor lineas de entalpias
	document.getElementById("ghexvkjkibmvvcx"),	// 1 Contenedor lineas de humedad especifica
	document.getElementById("fbdcvasdfcxazxg"),	// 2 Contenedor lineas de humedad relativa
	document.getElementById("ghwefgouidfgzxb"),	// 3 Contenedor lineas de temperatura de bulbo humedo
	document.getElementById("yujasaxozxjhszx"),	// 4 Contenedor lineas de temperatura de bulbo seco
	document.getElementById("fgsdfasdzxcadax"),	// 5 Contenedor lineas de temperatura de rocio
	document.getElementById("jaksjcuizxuimng")	// 6 Contenedor lineas de volumen especifico
];
let E = document.getElementById("htyftrghdfx");	// 
let F = document.getElementById("rtqweqwasqd");	// Contenedor grafico
let G = [
	document.getElementById("uuiasnjqlkppaws"),	// 0 Boton para abrir ventana de ingresar datos
	document.getElementById("nfgdwerfsdfxcvs"),	// 1 Ventana
	document.getElementById("ddxcvderhhgfdcs"),	// 2 Titulo de la ventana
	document.getElementById("ioanzknasjzbndf"),	// 3 Input
	document.getElementById("cuqiwasjkasnaks"),	// 4 Boton para mandar los datos
	document.getElementById("ywqwdkjhzdcidao"),	// 5 Spinner
	document.getElementById("pdiqfsdhjqjqkis"),	// 6 Label
	document.getElementById("rijwduhasdjhaja"),	// 7 Mensaje de error
	document.getElementById("ghdfgsdwetqsdgf")	// 8 Boton menu
];
let H = [
	document.getElementById("uashjqbnaskjsaa"),	// 0 Boton para abrir ventana de mostrar mensaje
	document.getElementById("kjhrtfhdfgwsfgx"),	// 1 Titulo de la ventana de mensaje
	document.getElementById("yuwqdjkhasbnmzx")	// 2 Cuerpo del mensaje
];
let S,T;
let U = [
	document.getElementById("rvbdfkjhjhhjjje"),	// 0 Contenedor sistema de unidades
	document.getElementById("mewfsdferfdfgsw")	// 1 Select sistema de unidades
];
let V = [
	document.getElementById("nesdfhrtgfddwfd"),	// 0 Contenedor altura sobre el nivel del mar
	document.getElementById("cwqffdcfdfdsqwd"),	// 1 Input
	document.getElementById("jghrthdsdujhbhf"),	// 2 Label
	document.getElementById("fgtdfgeryjhdfdw")	// 3 Error
];
let W=null,X,Y,Z;
window.addEventListener("load",() =>{
	a1();
	if(localStorage.getItem("CaddoMohammed-CartaPsicrometrica")===null){
		U[1].value = 2;
		V[1].value = 0;
		a2(true);
	} else {
		T = localStorage.getItem("CaddoMohammed-CartaPsicrometrica")
		T = JSON.parse(T);
		if(T.F===false){
			U[1].value = 1;
		}
		else{
			U[1].value = 2;
		}
		V[1].value = T.E;
		a2(false);
		b2(T);
	}
});
window.addEventListener('resize',() => a1());
U[1].addEventListener("change",() => a2(true));
V[1].addEventListener("input",() => a3());
document.addEventListener("keydown", (z) => c1(z));
G[3].addEventListener("input",() => c3(S));
function a1(){
	let a = window.innerHeight;
	let b = window.innerWidth;
	if(b<768){
		U[0].classList.add("mb-3");
		V[1].classList.add("mb-3");
	}
	else {
		U[0].classList.remove("mb-3");
		V[1].classList.remove("mb-3");
	}
	if((a<420)&&(b>=1.5*420)){
		A[1].className = "d-flex flex-column justify-content-start align-items-stretch";
		A[2].className = "d-flex flex-column justify-content-start p-2";
		A[1].style.height = "100%";
		A[2].style.height = "100%";
		A[1].style.width = "50vw";
		A[2].style.width = "50vw";
		A[2].style.removeProperty("min-width");
		A[1].style.overflow = "auto";
	}
	else{
		if(window.innerWidth<(420+20+0.58*b)){
			A[1].className = "d-flex flex-column justify-content-start align-items-stretch flex-grow-1";
			A[2].className = "d-flex flex-column justify-content-start flex-grow-1 p-2";
			A[1].style.height = "50%";
			A[2].style.height = "50%";
			A[1].style.width = "100%";
			A[2].style.width = "100%";
		}
		else{
			A[1].className = "d-flex flex-column justify-content-start align-items-stretch";
			A[2].className = "d-flex flex-column justify-content-start p-2";
			A[1].style.height = "100%";
			A[2].style.height = "100%";
			A[1].style.width = "420px";
			if(0.35*b<420){
				A[1].style.width = "35vw";
			}
			A[2].style.minWidth = "50vw";
			A[1].style.overflow = "auto";
			A[2].style.flexGrow = 10;
			A[2].style.removeProperty("width");
		}
	}
}
function a2(x){
	switch(U[1].value){
		default:
			U[1].classList.add("is-invalid");
			V[1].placeholder = "";
			V[2].innerHTML = "";
			break;
		case "1":
			U[1].classList.remove("is-invalid");
			V[1].min = -16500;
			V[1].max = 36000;
			V[1].placeholder = "Altura sobre el nivel del mar <em>(ft)</em>";
			V[2].innerHTML = "Altura sobre el nivel del mar <em>(ft)</em>";
			break;
		case "2":
			U[1].classList.remove("is-invalid");
			V[1].min = -5000;
			V[1].max = 11000;
			V[1].placeholder = "Altura sobre el nivel del mar <em>(m)</em>";
			V[2].innerHTML = "Altura sobre el nivel del mar <em>(m)</em>";
			break;
	}
	if(x===true){
		a3();
	}
}
function a3(){
	clearTimeout(W);
	W = setTimeout(() => {
		if(isNaN(V[1].value)){
			V[1].classList.add("is-invalid");
			V[3].innerHTML = "Solamente números";
			return;
		}
		if((Number(V[1].value)==0)&&(V[1].value!=="0")){
			V[1].classList.add("is-invalid");
			V[3].innerHTML = "Ingrese un carácter valido";
			return;
		}
		switch(U[1].value){
			case "0":
				return;
			case "1":
				if(V[1].value<-16500){
					V[1].classList.add("is-invalid");
					V[3].innerHTML = "El mínimo es de -16,500 ft";
					return;
				}
				if(V[1].value>36000){
					V[1].classList.add("is-invalid");
					V[3].innerHTML = "El máximo es de 36,000 ft";
					return;
				}
				break;
			case "2":
				if(V[1].value<-5000){
					V[1].classList.add("is-invalid");
					V[3].innerHTML = "El mínimo es de -5,000 m";
					return;
				}
				if(V[1].value>11000){
					V[1].classList.add("is-invalid");
					V[3].innerHTML = "El máximo es de 11,000 m";
					return;
				}
				break;
		}
		V[1].classList.remove("is-invalid");
		V[3].innerHTML = "";
		b1();
	},700);
}
function b1(){
	let a = document.createElement("div");
	a.style.position = "absolute";
	a.style.top = "50%";
	a.style.left = "50%";
	a.className = "z-3"
	a.style.transform = "translate(-50%,-50%)";
	a.innerHTML = `
	<div class="spinner-border text-primary" role="status" style="width:5rem; height:5rem;">
		<span class="visually-hidden">Loading...</span>
	</div>`;
	F.appendChild(a);
	fetch(`https://cartapsicrometrica-a00-774000747273.us-central1.run.app/rreszdzxvffgsdfcxcasa`,{
		method:"POST",
		headers: {
			"Content-Type":"application/json"
		},
		body: JSON.stringify({A:Number(U[1].value),B:Number(V[1].value)}),
	})
	.then(V => V.json())
	.then(x => {
		F.innerHTML = "";
		T = x;
		b5();
		localStorage.setItem("CaddoMohammed-CartaPsicrometrica",JSON.stringify(T));
		b2(x);
	})
	.catch(c => {
		console.error(c);
	});
}
function b2(x){
	Plotly.purge(F);
	let a,b,c,d,e,f,g,h,z=[];
	if(x.F){
		a = "m<sup>3</sup>/kg<sub>da</sub>";
		b = "kJ/kg<sub>da</sub>";
		c = "°C";
		if(x.E===0){
			d = [-60,90];
			e = [0,50];
			f = 50;
			g = [0,30];
		} else {
			d = [-60,90];
			e = [-60,90];
			f = 100;
			g = [0,100];
		}
		h = "Carta Psicrométrica en el sistema internacional";
	} else {
		a = "ft<sup>3</sup>/lb<sub>da</sub>";
		b = "Btu/lb<sub>da</sub>";
		c = "°F";
		if(x.E===0){
			d = [-80,150];
			e = [32,120];
			f = 0.05;
			g = [0,0.03];
		} else {
			d = [-80,200];
			e = [-50,120];
			f = 0.1;
			g = [0,0.05];
		}
		h = "Carta Psicrométrica en el sistema inglés";
	}
	for(let i=0;i<x.A[1].length;i++){
		z.push({
			x:x.A[0][i],
			y:x.A[1][i],
			mode:"lines",
			line:{
				color:"#000000",
				width:0.8
			},
			name:`H.R. = ${x.A[2][i]} %`
		});
	}
	for(let i=0;i<x.B[1].length;i++){
		z.push({
			x:x.B[0][i],
			y:x.B[1][i],
			mode:"lines",
			line:{
				color:"#000000",
				width:0.8
			},
			name:`${x.B[2][i]} ${a}`
		});
	}
	for(let i=0;i<x.C[1].length;i++){
		z.push({
			x:x.C[0][i],
			y:x.C[1][i],
			mode:"lines",
			line:{
				color:"#000000",
				width:0.8
			},
			name:`${x.C[2][i]} ${b}`
		});
	}
	z.push({
		x:x.C[3],
		y:x.C[4],
		mode:"lines",
		line:{
			color:"#000000",
			width:0.8
		}
	});
	for(let i=0;i<x.D[1].length;i++){
		z.push({
			x:x.D[0][i],
			y:x.D[1][i],
			mode:"lines",
			line:{
				dash:"dashdot",
				color:"#000000",
				width:0.5
			},
			name:`T.b.h. = ${x.D[2][i]+c}}`
		});
	}
	X = z;
	Y = {
		xaxis:{
			title:`Temperatura de bulbo seco (${c})`,
			minallowed:d[0],
			maxallowed:d[1],
			showgrid:true,
			zeroline:true,
			showline:true,
			mirror:"ticks",
			gridcolor:'#bdbdbd',
			gridwidth:1,
			zerolinecolor:"#969696",
			zerolinewidth:1,
			linecolor:"#636363",
			linewidth:1,
			tickmode:"auto",
			dtick:0.1,
			ticklen:10,
			minor:{
				ticklen:5,
				nticks:10,
			},
			mirror:true,
			rangemode:"tozero",
			range:e
		},
		yaxis:{
			title:"Humedad específica",
			minallowed:0,
			maxallowed:f,
			showgrid:true,
			zeroline:true,
			showline:true,
			mirror:"ticks",
			gridcolor:"#bdbdbd",
			gridwidth:1,
			zerolinecolor:"#969696",
			zerolinewidth:1,
			linecolor:"#636363",
			linewidth:1,
			tickmode:"auto",
			dtick:0.1,
			ticklen:10,
			minor:{
				ticks:"outside",
				ticklen:5,
				nticks:15,
			},
			mirror:true,
			rangemode:"tozero",
			range:g
		},
		showlegend:false,
		dragmode:false,
		scrollZoom:false,
		margin:{
			autoexpand:false,
			b:60,
			l:60,
			r:5,
			t:35
		}
	}
	Z = {
		displaylogo:false,
		toImageButtonOptions:{
			format:"png",
			filename:h,
			height:1080,
			width:1300,
			scale:1
		},
		modeBarButtonsToRemove:["autoScale2d","lasso2d","select2d","zoom2d"],
		displayModeBar:true,
		showAxisRangeEntryBoxes:false,
		showAxisDragHandles:false,
		showAxisRangeEntryBoxes:false,
		responsive:true,
		doubleClickDelay:10
	}
	Plotly.newPlot(F,X,Y,Z);
	if(T.H!=undefined){
		b3();
	}
	if(T.J!==undefined){
		d3(T.J);
	}
}
function b3(){
	for(let i=0;i<7;i++){
		for(let j=0;j<T.H[i].length;j++){
			b4(T.H[i][j],i);
		}
	}
}
function b4(x,y){
	let a = document.createElement("div");
	a.className = "d-flex justify-content-between align-content-center m-2";
	let b = document.createElement("p");
	b.className = "m-1 p-1";
	b.innerHTML = x[3].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})+x[4];
	a.appendChild(b);
	let c  =  document.createElement("p");
	c.className = "mx-3"
	c.innerHTML = `<i class="bi bi-trash"></i>`;
	c.onclick = function(){
		a.remove();
		X = X.filter(b => b.name!==(x[3].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})+x[4]));
		T.H[y] = T.H[y].filter(b => !b.includes(x[3]));
		T.I = T.I.filter(b => !b.includes(x[3]));
		if(T.H[y].length===0){
			C[y].classList.add("d-none");
			D[y].classList.add("d-none");
		}
		localStorage.setItem("CaddoMohammed-CartaPsicrometrica",JSON.stringify(T));
		Plotly.react(F,X,Y,Z);
	}
	c.onmouseenter = function(){
		c.style.color = "var(--bs-danger)";
	}
	c.onmouseleave = function(){
		c.style.color = "var(--bs-body-color)";
	}
	a.appendChild(c);
	D[y].appendChild(a);
	if(B[4].classList.contains("d-none")){
		B[4].classList.remove("d-none");
	}
	if(C[y].classList.contains("d-none")){
		C[y].classList.remove("d-none");
	}
	if(D[y].classList.contains("d-none")){
		D[y].classList.remove("d-none");
	}
	X.push({
		x:x[0],
		y:x[1],
		mode:"lines",
		line:{
			color:x[2],
			width:2
		},
		name:x[3].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})+x[4]
	});
	Plotly.react(F,X,Y,Z);
}
function b5(){
	T.H = [[],[],[],[],[],[],[]];
	T.I = [];
	T.J = new Object();
	T.K = new Object();
	T.L = [];
	localStorage.setItem("CaddoMohammed-CartaPsicrometrica",JSON.stringify(T));
	b2(T);
	B[4].classList.add("d-none");
	B[5].innerHTML = "";
	for(let i=0;i<7;i++){
		C[i].classList.add("d-none");
		D[i].innerHTML = "";
	}
}
function c1(z){
	if(!G[1].classList.contains("show")){
		if((z.key==="h")||z.key==="H"){
			c2(0);
		}
		if((z.key==="w")||z.key==="W"){
			c2(1);
		}
		if((z.key==="r")||z.key==="R"){
			c2(2);
		}
		if((z.key==="b")||z.key==="B"){
			c2(3);
		}
		if((z.key==="t")||z.key==="T"){
			c2(4);
		}
		if((z.key==="d")||z.key==="D"){
			c2(5);
		}
		if((z.key==="v")||z.key==="V"){
			c2(6);
		}
	}
	if(G[1].classList.contains("show")){
		if(z.key==="Enter"){
			c4();
		}
	}
}
function c2(x){
	S = x;
	switch(x){
		case 0:
			G[2].innerHTML = `Entalpía (<em>${T.G[0][0]}</em>)`;
			G[3].min = T.G[0][1];
			G[3].max = T.G[0][2];
			break;
		case 1:
			G[2].innerHTML = `Humedad específica (<em>${T.G[1][0]}</em>)`;
			G[3].min = T.G[1][1];
			G[3].max = T.G[1][2];
			break;
		case 2:
			G[2].innerHTML = `Humedad relativa (<em>${T.G[2][0]}</em>)`;
			G[3].min = T.G[2][1];
			G[3].max = T.G[2][2];
			break;
		case 3:
			G[2].innerHTML = `Temperatura de bulbo húmedo (<em>${T.G[3][0]}</em>)`;
			G[3].min = T.G[3][1];
			G[3].max = T.G[3][2];
			break;
		case 4:
			G[2].innerHTML = `Temperatura de bulbo seco (<em>${T.G[4][0]}</em>)`;
			G[3].min = T.G[4][1];
			G[3].max = T.G[4][2];
			break;
		case 5:
			G[2].innerHTML = `Temperatura de rocío (<em>${T.G[5][0]}</em>)`;
			G[3].min = T.G[5][1];
			G[3].max = T.G[5][2];
			break;
		case 6:
			G[2].innerHTML = `Volumen específico (<em>${T.G[6][0]}</em>)`;
			G[3].min = T.G[6][1];
			G[3].max = T.G[6][2];
			break;
	}
	G[3].value = "";
	G[3].classList.remove("is-invalid");
	G[7].innerHTML = "";
	G[0].click();
}
function c3(){
	clearTimeout(W);
	W = setTimeout(() => {
		if(isNaN(G[3].value)){
			G[3].classList.add("is-invalid");
			G[7].innerHTML = "Solamente números";
			return;
		}
		if((Number(G[3].value)==0)&&(G[3].value!=="0")){
			G[3].classList.add("is-invalid");
			G[7].innerHTML = "Ingrese un carácter valido";
			return;
		}
		if(G[3].value<T.G[S][[1]]){
			G[3].classList.add("is-invalid");
			G[7].innerHTML = `El valor minímo para ingresar es de ${T.G[S][1]}${T.G[S][0]}`;
			return;
		}
		if(G[3].value>T.G[S][[2]]){
			G[3].classList.add("is-invalid");
			G[7].innerHTML = `El valor máximo para ingresar es de ${T.G[S][2]}${T.G[S][0]}`;
			return;
		}
		G[3].classList.remove("is-invalid");
		G[7].innerHTML = "";
	},500);
}
function c4(){
	if(isNaN(G[3].value)){
		return;
	}
	if((Number(G[3].value)==0)&&(G[3].value!=="0")){
		return;
	}
	if(G[3].value<T.G[S][[1]]){
		return;
	}
	if(G[3].value>T.G[S][[2]]){
		return;
	}
	let a = 0;
	if(T.F===true){
		a = 1;
	}
	if(T.H!==undefined){
		if(T.H[S].some(b => b.includes(Number(G[3].value)))){
			G[3].classList.add("is-invalid");
			G[7].innerHTML = "Valor ya guardado";
			return;
		}
	}
	G[4].disabled = true;
	G[5].classList.remove("d-none");
	G[6].innerHTML = "Cargando...";
	fetch(`https://cartapsicrometrica-a00-774000747273.us-central1.run.app/ttrgxdfvasdfhgfcvsxdf`, {
		method:"POST",
		headers:{
			"Content-Type":"application/json",
		},
		body: JSON.stringify({A:S,B:a,C:T.E,D:Number(G[3].value),E:T.B[2][T.B[2].length-1]})
	})
	.then(u => u.json())
	.then(v => {
		b4(v[0],v[1]);
		G[0].click();
		G[4].disabled = false;
		G[5].classList.add("d-none");
		G[6].innerHTML = "Aceptar";
		if(T.H===undefined){
			T.H = [[],[],[],[],[],[],[]];
			T.I = [];
			T.J = new Object;
			T.K = new Object;
		}
		T.H[v[1]].push(v[0]);
		T.I.push([v[1],v[0][3]]);
		localStorage.setItem("CaddoMohammed-CartaPsicrometrica",JSON.stringify(T));
		d1();
	})
	.catch(k => console.error(k));
}
function c5(){
	if(G[8].style.transform==="rotate(0deg)"){
		G[8].style.transform = "rotate(90deg)";
		return;
	}
	if(G[8].style.transform==="rotate(90deg)"){
		G[8].style.transform = "rotate(0deg)";
		return;
	}
}
function d1(){
	let a = false;
	if(T.L==undefined){
		a = true;
	} else {
		if(T.L.length===0){
			a = true;
		}
	}
	fetch(`https://cartapsicrometrica-a00-774000747273.us-central1.run.app/ppoasakjzxgqhgahzbanq`, {
		method:"POST",
		headers:{
			"Content-Type":"application/json",
		},
		body: JSON.stringify({A:T.F,B:T.E,C:T.B[2][T.B[2].length-1],D:T.I,E:a,F:T.K})
	})
	.then(u => u.json())
	.then(v => {
		if(v.length>1){
			T.L = v[1];
		}
		d2(v[0]);
	})
	.catch(k => console.error(k));
}
function d2(v){
	let a = 0;
	for(let i in v){
		a = a+1;
		if(T.J[i]){
			continue
		}
		T.J[i] = v[i]
		T.K[i] = 1;
		d3({[i]:v[i]});
	}
	Plotly.react(F,X,Y,Z);
	localStorage.setItem("CaddoMohammed-CartaPsicrometrica",JSON.stringify(T));
}
function d3(v){
	for(let i in v){
		let a = document.createElement("div");
		a.className = "accordion accordion-flush accordion-item";
		a.id = `BotonPunto-${i}`;
		B[5].appendChild(a);
		let b = document.createElement("h2");
		b.className = "accordion-header";
		b.innerHTML = 
			`<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#Punto-${i}" aria-expanded="false" aria-controls="Punto-${i}">
				${i}
			</button>`;
		a.appendChild(b);
		let c = document.createElement("div");
		c.id = `Punto-${i}`;
		c.className = "accordion-collapse collapse ms-3 p-1";
		c.setAttribute("data-bs-parent","#krtegujidfokjfh");
		a.appendChild(c);
		c.innerHTML =
			`<table class="table table-dark table-striped">
				<tbody>
					<tr class="table-dark">
						<td class="table-dark">Temperatura de bulbo seco <em>(t)</em></td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][0].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[0]}</td>
					</tr>
					<tr class="table-dark">
						<td class="table-dark">Temperatura de bulbo húmedo <em>(tbh)</em></td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][1].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[0]}</td>
					</tr>
					<tr class="table-dark">
						<td class="table-dark">Temperatura de rocío <em>(dp)</em></td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][2].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[0]}</td>
					<tr class="table-dark">
						<td class="table-dark">Presión del agua saturada</td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][3].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[1]}</td>
					</tr>
					<tr class="table-dark">
						<td class="table-dark">Presión del vapor de agua en el aire</td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][4].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[1]}</td>
					</tr>
					<tr class="table-dark">
						<td class="table-dark">Humedad específica del agua saturada</td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][5].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[2]}</td>
					</tr>
					<tr class="table-dark">
						<td class="table-dark">Humedad específica <em>(W)</em></td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][6].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[2]}</td>
					</tr>
					<tr class="table-dark">
						<td class="table-dark">Humedad relativa</td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][7].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[3]}</td>
					</tr>
					<tr class="table-dark">
						<td class="table-dark">Entalpía <em>(h)</em></td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][8].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[4]}</td>
					</tr>
					<tr class="table-dark">
						<td class="table-dark">Volumen específico <em>(v)</em></td>
						<td class="table-dark" style="width:max-content; text-align:right;">${v[i][9].toLocaleString('en-US',{style:"decimal",maximunFractionDigits:4})}</td>
						<td class="table-dark" style="width:max-content;">${T.L[5]}</td>
					</tr>
				</tbody>
			</table>`;
		let d = document.createElement("div");
		d.className = "d-flex justify-content-between m-2 me-4 align-items-center";
		c.appendChild(d);
		let e = document.createElement("p");
		e.className = "m-2";
		if(T.K[i]===1){
			e.innerHTML = `<i class="bi bi-eye-slash-fill"></i>`;
			X.push({
				x:[v[i][0]],
				y:[v[i][6]],
				mode:"markers",
				type:"scatter",
				marker:{
					size:10,
				},
				name:i
			});
			Plotly.react(F,X,Y,Z);
		} else {
			e.innerHTML = `<i class="bi bi-eye-fill"></i>`;
		}
		e.onclick = function(){
			if(e.innerHTML==`<i class="bi bi-eye-slash-fill"></i>`){
				e.innerHTML = `<i class="bi bi-eye-fill"></i>`;
				X = X.filter(g => g.name!==i);
				T.K[i] = 0;
				Plotly.react(F,X,Y,Z);
				localStorage.setItem("CaddoMohammed-CartaPsicrometrica",JSON.stringify(T));
			} else {
				e.innerHTML = `<i class="bi bi-eye-slash-fill"></i>`;
				T.K[i] = 1;
				X.push({
					x:[v[i][0]],
					y:[v[i][6]],
					mode:"markers",
					type:"scatter",
					marker:{
						size:10,
					},
					name:i
				});
				Plotly.react(F,X,Y,Z);
				localStorage.setItem("CaddoMohammed-CartaPsicrometrica",JSON.stringify(T));
			}
		}
		d.appendChild(e);
		let f = document.createElement("button");
		f.className = "btn btn-danger";
		f.setAttribute("type","button");
		f.innerHTML = `Eliminar punto <i class="bi bi-trash3-fill"></i>`;
		f.onclick = function(){
			a.remove();
			X = X.filter(g => g.name!==i);
			delete T.J[i];
			delete T.K[i];
			localStorage.setItem("CaddoMohammed-CartaPsicrometrica",JSON.stringify(T));
			Plotly.react(F,X,Y,Z);
		}
		d.appendChild(f);
	}
}